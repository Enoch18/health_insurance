import{q as S,r as h,a as c,j as e,c as g}from"./app.e0868774.js";import{j as w,x as j,y as A}from"./MainLayout.0824f71e.js";import{T}from"./TopHeaderSection.db497e75.js";import{C as n}from"./CustomTextInput.f2c70347.js";import{C as x}from"./CustomSelectbox.85340afe.js";import{P as V}from"./Paper.f1fc2464.js";import{A as P}from"./Alert.bb949d5c.js";import"./useTypedPage.b1bffe46.js";import"./createSimplePaletteValueFilter.98a057b1.js";const R=({policy_holders:s,services:u})=>{const{errors:a}=S().props,[b,p]=h.exports.useState(""),[t,y]=h.exports.useState({}),[d,_]=h.exports.useState([{id:1,service_id:"",claim_amount:""}]),v=(r,i)=>{let l=d,m=l.find(C=>Number(C.id)===Number(r));m&&(m.service_id=i.target.name==="service_id"?i.target.value:m.service_id,m.claim_amount=i.target.name==="claim_amount"?i.target.value:m.claim_amount),_(l)},f=()=>{const r=d[d.length-1].id+1;_(i=>[...i,{id:r,service_id:"",claim_amount:""}])},N=r=>{_(()=>d.filter(i=>Number(i.id)!==Number(r)))};function o(r){const i=r.target.id,l=r.target.value;y(m=>({...m,[i]:l}))}return c(w,{title:"Create New Claim",children:[e(T,{title:"Add New Claim",hideAddBtn:!0}),b!==""&&b!==void 0&&e(P,{severity:"error",className:"mb-2",children:b}),e(V,{children:c("form",{onSubmit:r=>{r.preventDefault(),t.claim_services=d,g.post("/claims-management/claims",t,{onSuccess:()=>{g.visit("/claims-management/claims")},onError:i=>{p(i.error),setTimeout(()=>{p("")},3e3)}})},children:[e("h4",{children:"Claim Details"}),e("hr",{className:"border-gray-500"}),c("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[e(x,{id:"policy_holder_id",name:"policy_holder_id",label:"Policy Holder",data:s==null?void 0:s.map(r=>({label:`${r.policy_number} - ${r.first_name} ${r.last_name}`,value:r.id})),setValue:o,value:t==null?void 0:t.policy_holder_id,error:a==null?void 0:a.policy_holder_id}),e(n,{id:"service_provider",type:"text",name:"service_provider",label:"Service Provider *",setValue:o,value:t==null?void 0:t.service_provider,error:a==null?void 0:a.service_provider}),e(n,{id:"claim_date",type:"date",name:"claim_date",label:"Claim Date *",setValue:o,value:t==null?void 0:t.claim_date,error:a==null?void 0:a.claim_date}),e(n,{id:"total_claimed_amount",type:"text",name:"total_claimed_amount",label:"Total Claimed Amount *",setValue:o,value:t==null?void 0:t.total_claimed_amount,error:a==null?void 0:a.total_claimed_amount})]}),e("hr",{className:"border-gray-500 mt-3"}),e("h4",{className:"mt-3",children:"Claim Services"}),(a==null?void 0:a.claim_services)&&e("p",{className:"text-red-500 font-semibold",children:a==null?void 0:a.claim_services}),c("table",{className:"w-full mt-2",children:[e("thead",{children:c("tr",{className:"bg-gray-500 border-x border-x-gray-400 border-y-gray-400 border-y",children:[e("td",{className:"p-2",children:"Service"}),e("td",{children:"Amount"}),d.length>1&&e("td",{})]})}),e("tbody",{children:d==null?void 0:d.map((r,i)=>c("tr",{className:"border-b-gray-400 border-b",children:[e("td",{className:"py-2 border-x border-x-gray-400",children:e(x,{id:"service_id",name:"service_id",label:"Service",hideLabel:!0,data:u==null?void 0:u.map(l=>({label:l.name,value:l.id})),setValue:l=>v(r.id,l),value:t==null?void 0:t.service_id,error:a[`claim_services.${i}.service_id`]})}),e("td",{className:"py-2 border-x border-x-gray-400",children:e(n,{id:"claim_amount",type:"text",name:"claim_amount",label:"Service Amount *",hideLabel:!0,setValue:l=>v(r.id,l),value:t==null?void 0:t.claim_amount,error:a[`claim_services.${i}.claim_amount`]})}),d.length>1&&e("td",{className:"border-r border-t border-gray-400",children:i>0&&e("button",{type:"button",onClick:()=>N(r.id),className:"flex flex-row items-center justify-center w-[100%]",children:e(j,{className:"text-3xl"})})})]},i))})]}),e("div",{className:"flex flex-row justify-end",children:e("button",{type:"button",onClick:f,className:"flex flex-row items-center justify-center w-11 h-11 bg-green-500 rounded-full shadow mt-2",children:e(A,{className:"text-2xl text-white"})})}),e("div",{className:"mt-3",children:e("button",{className:"bg-blue-500 text-white rounded p-2",children:"Submit Claim"})})]})})]})};export{R as default};
