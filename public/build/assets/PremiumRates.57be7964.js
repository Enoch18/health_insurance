import{j as $}from"./MainLayout.0824f71e.js";import{T as y}from"./TopHeaderSection.db497e75.js";import{r as d,a as i,j as e,c as L,u as S,b as u}from"./app.e0868774.js";import{B as C}from"./Breadcrumbs.cb625ac2.js";import{T}from"./Table.361516fa.js";import{r as f,f as w}from"./helper.7a2b918a.js";import{L as A}from"./Loader.95ccec67.js";import"./useTypedPage.b1bffe46.js";const x=({coverage_level_id:r,policy_year_id:c,coverage_period_id:s,coverage_age_range_id:m,insurance_type_id:h,value_type:n,defaultLimitAmount:p})=>{var b;const[o,t]=d.exports.useState(""),[g,a]=d.exports.useState(""),[v,_]=d.exports.useState(!1),P=d.exports.useRef(null),N=l=>{L.post(`/administrations/insurance-types/${h}/premium-rates`,{coverage_level_id:r,policy_year_id:c,coverage_period_id:s,coverage_age_range_id:m,value_type:n,amount:l},{onSuccess:()=>{_(!1)}})};return d.exports.useEffect(()=>{const l=setTimeout(()=>{if(o!==""&&Number(f(o))>0){let R=f(o);_(!0),N(Number(R))}},500);return()=>{clearTimeout(l)}},[o]),i("form",{children:[i("div",{className:"flex flex-row items-center gap-2",children:[e("input",{ref:P,type:"text",onChange:l=>{if(a(""),isNaN(f(l.target.value))){a(`Please enter a valid ${n}!`),t("");return}t(f(l.target.value))},className:"w-[100%] rounded dark:bg-gray-500 dark:text-white",defaultValue:(b=w(p))!=null?b:"0.00",placeholder:"Enter benefit limit"}),v&&e(A,{})]}),g!==""&&e("p",{className:"text-red-500 font-semibold",children:g})]})},H=({insurance_type_id:r,coverage_level_id:c,year_id:s,year:m,rates:h,coverage_level:n})=>{const p=S(),o=[{id:"ageRange",label:"Age Range"},{id:"individualPrice",label:"Individual Price"},{id:"corporatePrice",label:"Corporate Price"},{id:"taxPercentage",label:"Tax Percentage"}];return i($,{title:"Insurance Setups | Premium Rates",children:[e(C,{title:i("div",{className:"flex flex-row gap-1 items-center",children:[e(u,{className:"text-blue-500",href:p("administrations.index"),children:"Administrations"})," ",">",e(u,{className:"text-blue-500",href:p("insurance-types.index"),children:"Insurance Management"})," ",">",e(u,{className:"text-blue-500",href:`/administrations/insurance-types/setups/${r}`,children:"Insurance Setups"})," ",">",e(u,{className:"text-blue-500",href:`/administrations/insurance-types/${r}/years`,children:"Premium Rate Policy Years"})," ",">",i(u,{className:"text-blue-500",href:`/administrations/insurance-types/${r}/years/${s}/premium-coverage-levels`,children:[m," ",n," Premium Coverage Levels"]})," ",">",i("h4",{children:[m," ",n," Premium Rates"]})]})}),e(y,{title:`${m} ${n} Premium Rates`,hideAddBtn:!0}),e("div",{className:"mt-3",children:h.map((t,g)=>i("div",{children:[e("h4",{className:"text-lg font-semibold mt-5",children:t.period}),e(T,{headers:o,rows:t.rates.map(a=>({ageRange:`${a.min_age} - ${a.max_age} Years`,individualPrice:e(x,{coverage_level_id:c,policy_year_id:s,coverage_period_id:t.coverage_period_id,coverage_age_range_id:a.age_range_id,insurance_type_id:r,defaultLimitAmount:a.individual_price,value_type:"individual_price"}),corporatePrice:e(x,{coverage_level_id:c,policy_year_id:s,coverage_period_id:t.coverage_period_id,coverage_age_range_id:a.age_range_id,insurance_type_id:r,defaultLimitAmount:a.corporate_price,value_type:"corporate_price"}),taxPercentage:i("div",{className:"flex flex-row items-center gap-1",children:[e(x,{coverage_level_id:c,policy_year_id:s,coverage_period_id:t.coverage_period_id,coverage_age_range_id:a.age_range_id,insurance_type_id:r,defaultLimitAmount:a.tax_percentage,value_type:"tax_percentage"}),"%"]})}))})]},g))})]})};export{H as default};
